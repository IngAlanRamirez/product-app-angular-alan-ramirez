<mat-card>
  <form [formGroup]="form" (ngSubmit)="onSubmit()" autocomplete="off">
    <mat-form-field appearance="outline" style="width: 100%;">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="title" required />
      <mat-error *ngIf="form.get('title')?.hasError('required')">El nombre es obligatorio</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" style="width: 100%;">
      <mat-label>Precio</mat-label>
      <input matInput type="number" formControlName="price" min="0.01" required />
      <mat-error *ngIf="form.get('price')?.hasError('required')">El precio es obligatorio</mat-error>
      <mat-error *ngIf="form.get('price')?.hasError('min')">El precio debe ser mayor a 0</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" style="width: 100%;">
      <mat-label>Categoría</mat-label>
      <input matInput formControlName="category" required />
      <mat-error *ngIf="form.get('category')?.hasError('required')">La categoría es obligatoria</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" style="width: 100%;">
      <mat-label>Imagen (URL)</mat-label>
      <input matInput formControlName="image" required />
      <mat-error *ngIf="form.get('image')?.hasError('required')">La imagen es obligatoria</mat-error>
      <mat-error *ngIf="form.get('image')?.hasError('pattern')">Debe ser una URL válida</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" style="width: 100%;">
      <mat-label>Descripción</mat-label>
      <textarea matInput formControlName="description" rows="3"></textarea>
    </mat-form-field>

    <div style="margin-top: 1rem; display: flex; gap: 0.5rem; justify-content: flex-end; align-items: center;">
      <button mat-flat-button color="primary" type="submit" [disabled]="loading">{{ product ? 'Actualizar' : 'Agregar' }}</button>
      <button mat-stroked-button type="button" (click)="cancel.emit()" [disabled]="loading">Cancelar</button>
      <mat-spinner *ngIf="loading" diameter="28"></mat-spinner>
    </div>
  </form>
</mat-card>
