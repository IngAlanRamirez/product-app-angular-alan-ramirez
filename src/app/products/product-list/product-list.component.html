@if (!loading) {
  @if (!showForm) {
    <button (click)="onAdd()">Agregar producto</button>
    <button (click)="onShowSearchModal()">Buscar producto por ID</button>
  }
}

@if (notificationMessage) {
  <div [ngClass]="notificationType">
    {{ notificationMessage }}
  </div>
}

<app-product-modal
  [visible]="showForm"
  [product]="editingProduct"
  [loading]="formLoading"
  (save)="onSave($event)"
  (cancel)="onCancelForm()"
/>

<app-product-search-modal
  [visible]="showSearchModal"
  [loading]="searchLoading"
  [product]="searchedProduct"
  [error]="searchError"
  (search)="onSearchProductById($event)"
  (close)="onCloseSearchModal()"
/>

@if (loading) {
  <div>Cargando productos...</div>
}

@if (error) {
  <div>{{ error }}</div>
}

@if (!loading && !error) {
  <table>
    <thead>
      <tr>
        <th>Imagen</th>
        <th>Nombre</th>
        <th>Precio</th>
        <th>Categor√≠a</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      @for (product of products; track product.id) {
        <tr>
          <td><img [src]="product.image" alt="{{ product.title }}" width="50"></td>
          <td>{{ product.title }}</td>
          <td>{{ product.price | currency }}</td>
          <td>{{ product.category }}</td>
          <td>
            <button (click)="onEdit(product)">Editar</button>
            <button (click)="onDelete(product)">Eliminar</button>
          </td>
        </tr>
      } @empty {
        <tr>
          <td colspan="5">No hay productos</td>
        </tr>
      }
    </tbody>
  </table>
}

